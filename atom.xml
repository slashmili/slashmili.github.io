<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[/mili]]></title>
  <link href="http://slashmili.github.io/atom.xml" rel="self"/>
  <link href="http://slashmili.github.io/"/>
  <updated>2013-10-26T17:14:34+08:00</updated>
  <id>http://slashmili.github.io/</id>
  <author>
    <name><![CDATA[Milad Rastian]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[Monitor your app's behaviour]]></title>
    <link href="http://slashmili.github.io/blog/2013/08/11/monitor-your-apps-behaviour/"/>
    <updated>2013-08-11T00:00:00+08:00</updated>
    <id>http://slashmili.github.io/blog/2013/08/11/monitor-your-apps-behaviour</id>
    <content type="html"><![CDATA[<div class='post'>
<div dir="ltr" style="text-align: left;" trbidi="on"><div style="color: #444444; font-family: 'Helvetica Neue', HelveticaNeue, Helvetica, Arial, sans-serif; font-size: 14px; line-height: 19px;">I had a talk&nbsp;at&nbsp;<a data-mce-href="https://www.facebook.com/groups/klxrb/" href="https://www.facebook.com/groups/klxrb/" style="color: #444444;">KL Ruby Brigade</a>&nbsp;about Monitoring App&#8217;s behaviour. You can find the&nbsp;presentation in&nbsp;<a data-mce-href="https://docs.google.com/presentation/d/1nsEUW9s5_YoxXWgrwl3mvmIdkhWamYlIwADfKfJEpkc/edit?usp=sharing" href="https://docs.google.com/presentation/d/1nsEUW9s5_YoxXWgrwl3mvmIdkhWamYlIwADfKfJEpkc/edit?usp=sharing" style="color: #444444;">here</a>&nbsp;or flip it here:</div><div style="color: #444444; font-family: 'Helvetica Neue', HelveticaNeue, Helvetica, Arial, sans-serif; font-size: 14px; line-height: 19px;"><iframe allowfullscreen="" frameborder="0" height="356" marginheight="0" marginwidth="0" mozallowfullscreen="" scrolling="no" src="http://www.slideshare.net/slideshow/embed_code/25139283" style="border-width: 1px 1px 0; border: 1px solid #CCC; margin-bottom: 5px; max-width: 427px;" webkitallowfullscreen="" width="100%"> </iframe> <br /><div style="margin-bottom: 5px;"><strong> <a href="http://www.slideshare.net/miladrastian/monitor-your-apps-behaviour-25139283" target="_blank" title="Monitor your app&amp;#39;s behaviour">Monitor your app&amp;#39;s behaviour</a> </strong> from <strong><a href="http://www.slideshare.net/miladrastian" target="_blank">Milad Rastian</a></strong> <br /><br /></div></div><div style="color: #444444; font-family: 'Helvetica Neue', HelveticaNeue, Helvetica, Arial, sans-serif; font-size: 14px; line-height: 19px;">My talk was mainly about why and how you can monitor your app&#8217;s behaviour through monitoring systems like&nbsp;<a data-mce-href="http://www.zenoss.org/" href="http://www.zenoss.org/" style="color: #444444;">Zenoss</a>&nbsp;and&nbsp;<a data-mce-href="https://github.com/etsy/statsd/" href="https://github.com/etsy/statsd/" style="color: #444444;">Statsd</a>&nbsp;&amp;&nbsp;<a data-mce-href="http://graphite.wikidot.com/" href="http://graphite.wikidot.com/" style="color: #444444;">Graphite</a>.</div><div style="color: #444444; font-family: 'Helvetica Neue', HelveticaNeue, Helvetica, Arial, sans-serif; font-size: 14px; line-height: 19px;"><br /></div><div style="color: #444444; font-family: 'Helvetica Neue', HelveticaNeue, Helvetica, Arial, sans-serif; font-size: 14px; line-height: 19px;"><br /></div></div></div>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Online Course with Coursera]]></title>
    <link href="http://slashmili.github.io/blog/2012/03/16/online-course-with-coursera/"/>
    <updated>2012-03-16T00:00:00+08:00</updated>
    <id>http://slashmili.github.io/blog/2012/03/16/online-course-with-coursera</id>
    <content type="html"><![CDATA[<div class='post'>
<div class='posterous_autopost'><p><a href="https://www.coursera.org/">Coursera</a> is online education center, it&#8217;s aim is to bring education for free to any person who is seeking for that.</p>  <p>I enrolled for three courses but I&#8217;ve only managed to attend one of them since 1 week ago that I registered.&nbsp;</p>  <p><strong>Software as a Service</strong> course is really great course for person who wants to learn <a href="http://en.wikipedia.org/wiki/Software_as_a_service">SaaS</a>,&nbsp;<a href="http://www.ruby-lang.org/en/" title="Ruby">Ruby</a>&nbsp;and <a href="http://rubyonrails.org/">Rails</a> and beside that you have fun class. Even though is so soon to judge about Rails but I&#8217;ve already missed <a href="https://www.djangoproject.com/">Django</a>.</p>  <p>I like their teaching method, you follow&nbsp;lectures and do homework related to the lectures, and they give you a score for you works(apparently your submitted files is runed with unittest and each test has score). I&#8217;ve already learnt a lot about Ruby just with following course and doing homework.</p>  <p>After all don&#8217;t miss.</p></div></div>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Monitor Zenoss with Chrome's Plugin]]></title>
    <link href="http://slashmili.github.io/blog/2012/03/16/monitor-zenoss-with-chrome-plugin/"/>
    <updated>2012-03-16T00:00:00+08:00</updated>
    <id>http://slashmili.github.io/blog/2012/03/16/monitor-zenoss-with-chrome-plugin</id>
    <content type="html"><![CDATA[<div class='post'>
<div class='posterous_autopost'><p>As currently my life is kind of stuck into Zenoss, I made another tools for Zenoss.</p>  <p>This time, it&#8217;s a Google Chrome&#8217;s plugin, I can say it&#8217;s more useful than <a href="https://play.google.com/store/apps/details?id=com.github.slashmili.Zendroid">Zenroid</a>, because you can watch out server&#8217;s alarm while you are browsing the web.</p>  <p>You can get source from <a href="https://github.com/slashmili/zenchor">zenchor</a>&nbsp;repo and install it from <a href="https://chrome.google.com/webstore/detail/hibkfafceeekmknadpglakdnmaiigonp?utm_source=chrome-ntp-icon">Chrome Web Store</a>.</p></div></div>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Configure and Manage your servers in a FLASH]]></title>
    <link href="http://slashmili.github.io/blog/2012/02/03/configure-and-manage-your-servers-in/"/>
    <updated>2012-02-03T00:00:00+08:00</updated>
    <id>http://slashmili.github.io/blog/2012/02/03/configure-and-manage-your-servers-in</id>
    <content type="html"><![CDATA[<div class='post'>
<div class='posterous_autopost'><p>About a 3 months ago I had a speech in <a href="http://webcamp.my/">Webcamp KL Group</a> about <a href="http://puppetlabs.com/">Puppet</a></p>  <p>You can get the voice from <a href="http://webcamp.my/2011/11/milad-rastian-configure-and-manage-your-servers-in-a-flash-with-puppet/">here</a>&nbsp;and watch the presntation from here :</p>  <p style="text-align: center;"><iframe src="https://docs.google.com/present/embed?id=dfk6jgws_2dh2r4xf7" frameborder="0" height="342" width="410"></iframe></p></div></div>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Zendroid - Android Application to Monitor Zenoss's Events]]></title>
    <link href="http://slashmili.github.io/blog/2011/07/03/zendroid-android-application-to-monitor/"/>
    <updated>2011-07-03T00:00:00+08:00</updated>
    <id>http://slashmili.github.io/blog/2011/07/03/zendroid-android-application-to-monitor</id>
    <content type="html"><![CDATA[<div class='post'>
<div class='posterous_autopost'><p><span style="font-family: arial; font-size: small;"><span style="font-family: Arial, Helvetica, sans-serif;">I released an Android&nbsp;Application&nbsp;which you can monitor your Zenoss&#8217;s events right in your Android Desktop</span><br /></span><div class='p_embed p_image_embed'> <img alt="Zendroid-ss" height="800" src="http://posterous.com/getfile/files.posterous.com/temp-2011-07-03/hsolEEqvoCuzFmrngkguHhypreljpJuiCErkDEyhgaFlfkfAykmezCdIeoej/zendroid-ss.png.scaled500.png" width="480" /> </div> </p>  <p>You can install it from <a href="http://goo.gl/RU1Pk">Android Market</a>&nbsp;(or you can scan barcode) and codes are available in <a href="https://github.com/slashmili/Zendroid">github repo</a>&nbsp;(it&#8217;s written in <a href="http://www.scala-lang.org/">scala</a>)</p>  <p><div class='p_embed p_image_embed'> <img alt="Zendroid-qr" height="215" src="http://posterous.com/getfile/files.posterous.com/temp-2011-07-03/diCgfEIkEJdqpcrhywjmCrgmhvqcGjbxlhEqJGdjpDBasrebDkGskvzEbhqy/zendroid-qr.png.scaled500.png" width="215" /> </div> </p></div></div>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Problem with PostgreSQL ODBC ZenPack]]></title>
    <link href="http://slashmili.github.io/blog/2011/07/03/problem-with-postgresql-odbc-zenpack/"/>
    <updated>2011-07-03T00:00:00+08:00</updated>
    <id>http://slashmili.github.io/blog/2011/07/03/problem-with-postgresql-odbc-zenpack</id>
    <content type="html"><![CDATA[<div class='post'>
<div class="posterous_autopost"><p>In my new job(if after 8 months you can count it as new!) I am responsible to maintain <a href="http://zenoss.org/" target="_blank">Zenoss</a> and some week I am on call for Zenoss&#8217;s Alarm.</p>  <p>One of the strangest problem that we had was about <a href="http://community.zenoss.org/docs/DOC-3497">PostgreSQL ODBC Database Monitor</a> package. suddenly zenperfsql stopped without any log.</p>  <p>I tried to run zenperfsql in debug mode and I hoped that I would fix the problem. but after the daemon died again the error that I saw was : </p>  <p><code>python: pthread_mutex_lock.c:62: __pthread_mutex_lock: Assertion `mutex-&gt;__data.__owner == 0' failed.</code></p>  <p>I never thought that I would face to python&#8217;s thread stuff ! as far as I knew Zenoss use <a href="http://twistedmatrix.com/">Twisted</a> framework and this error just happened for sql daemon so I reviewed the way that we had installed the packahe</p>  <p>For using this package you need to follow these steps </p>  <p><code>    /usr/local/zenoss/python/bin/easy_install pyodbc    apt-get install odbc-postgresq    apt-get install unixodbc-dev    </code></p>  <p>And edit /etc/odbcinst.ini, here is the tricky part, if you follow unixodbc document, it recommends you to config like :</p>  <p><code>    [PostgreSQL] Description     = PostgreSQL ODBC driver (Unicode version) Driver          = /usr/lib/odbc/psqlodbca.so Setup           = /usr/lib/odbc/libodbcpsqlS.so    </code></p>  <p>But you need to add an other line which is specifying number of Threads </p>  <p>  </p><p><code>    [PostgreSQL] Description     = PostgreSQL ODBC driver (Unicode version) Driver          = /usr/lib/odbc/psqlodbca.so Setup           = /usr/lib/odbc/libodbcpsqlS.so Threading = 2    </code></p>  <p> </p>  <p>After adding Threading line I never face that problem, I dunno why Twisted which is built as asynchronous framework can not handle this and we need to limit ODBC&#8217;s Thread.</p>  <p> </p>  <p><strong>UPDATE :</strong></p>  <p>I found another blog that he faced same problem and he explains the reason (<a href="http://hynek.me/blog/2011/04/twisted-sybase/">see more</a>)</p>  <p>  </p></div></div>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[When you are not free even to do rm -rf / !]]></title>
    <link href="http://slashmili.github.io/blog/2011/03/06/when-you-are-not-free-even-to-do-rm-rf/"/>
    <updated>2011-03-06T00:00:00+08:00</updated>
    <id>http://slashmili.github.io/blog/2011/03/06/when-you-are-not-free-even-to-do-rm-rf</id>
    <content type="html"><![CDATA[<div class='post'>
<div class='posterous_autopost'><p>How much it is painful that you can&#8217;t do rm -rf / in your machine !</p>  <p>when I did rm I got this error :</p>  <p><span style="font-size: x-small;">rm: cannot remove root directory `/&#8217; </span></p>  <p>In past great responsibility brought great power but this days you are not free.</p>  <p>&nbsp;</p>  <p>Cheers for past that you can do every thing you want !</p>  <p>&nbsp;</p></div></div>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Matching List and Map in Scala]]></title>
    <link href="http://slashmili.github.io/blog/2011/03/06/matching-list-and-map-in-scala/"/>
    <updated>2011-03-06T00:00:00+08:00</updated>
    <id>http://slashmili.github.io/blog/2011/03/06/matching-list-and-map-in-scala</id>
    <content type="html"><![CDATA[<div class='post'>
<div class='posterous_autopost'><p>For a while that I&#8217;ve been reading Scala I find it as a strong and powerfull language which helps you to write your application perfectly, it&#8217;s not like Java that ties you to follow some&nbsp;arid rules and it&#8217;s not like PHP that let you screw in your application(of course you can handle your code in PHP). Programing in Scala is fun as programming Python and it&#8217;s powerful as Java!</p>  <p>Scala&#8217;s Match syntax is liitle like Switch-Case but you can match value, type, regex, special type of class and more.&nbsp;</p>  <p>Here is a syntax of matching for List and map in Scala, for finding these codes I search a lot to ! so I wrote these samples for future usage.&nbsp;</p>  <p><code>    val foobar = Map("foo"-&gt;"bar")    foobar&nbsp;match {&nbsp;    &nbsp;&nbsp;case map :&nbsp;&nbsp;scala.collection.Map[_, _] =&gt; println(map)    }    </code></p>  <p>&nbsp;</p>  <p><code>    val foobar = List("foo","bar")    foobar&nbsp;match {&nbsp;    &nbsp;&nbsp;case &nbsp;list:Seq[_] =&gt; println(list)    }    </code></p>  <p>&nbsp;</p>  <p>So maybe you ask that why you need to handle something like this ?</p>  <p>It&#8217;s real world senario: I wanna to pass mix value of Map and List and String to function and get JSON string from that. some thing like this :</p>  <p><code>    def toJson(ob: Any):String = {    &nbsp;&nbsp;ob match {    &nbsp;&nbsp; &nbsp;case s : String&nbsp;&nbsp; =&gt; return "\""+ s + "\""    &nbsp;&nbsp;&nbsp; case d:Double&nbsp;&nbsp; =&gt; return "\""+ d.toString + "\""    &nbsp;&nbsp;&nbsp; case map:scala.collection.Map[_, _] =&gt; return "{" + ((for((k,v) &lt;- map) yield toJson(k) + ":" + toJson(v) ).reduceLeft(_ + ", " + _) ) + "}"    &nbsp;&nbsp;&nbsp; case list @ List(_*)&nbsp;&nbsp; =&gt; return "[" + ((for (m&lt;-list) yield toJson(m)).reduceLeft(_ + ", " + _) )&nbsp;&nbsp; + "]"    }    </code></p>  <p>Mabye last code doesn&#8217;t work probably ! because I write it to just show you how you can use this feature</p></div></div>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Yet Another Programming Language : Scala]]></title>
    <link href="http://slashmili.github.io/blog/2010/12/15/yet-another-programming-language-scala/"/>
    <updated>2010-12-15T00:00:00+08:00</updated>
    <id>http://slashmili.github.io/blog/2010/12/15/yet-another-programming-language-scala</id>
    <content type="html"><![CDATA[<div class='post'>
WTF !<div>Every day you wake up, you hear new language is growing in town. after that language becomes mature, you fill unstable in your current position. </div><div><br /></div><div>You think why they ever think about another language while there are bunch of languages out ?you think there is many languages still waiting in your TODO list which you want try so how can you skip them and try this new guy !</div><div><br /></div><div>Anyway I am going to interest in this one : Scala ! </div><div><br /></div><div>My first reason is <a href="http://www.blogger.com/www.rememberthemilk.com">Remember The Milk</a>. I am actually in love with this app.</div><div>Second one is, it smells Java! I don&#8217;t like Java to much because of it&#8217;s complexity but Scala give me power of Java.</div><div><br /></div><div>In my new job, I should learn more about Perl so this year will be funniest year in my life.</div><div> Fight between obsolescence and adolescent.</div><div><br /></div><div>Let&#8217;s who will win !</div></div>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[How to Setup Blogger Custom Domain with BIND]]></title>
    <link href="http://slashmili.github.io/blog/2010/10/21/how-to-setup-blogger-custom-domain-with/"/>
    <updated>2010-10-21T00:00:00+08:00</updated>
    <id>http://slashmili.github.io/blog/2010/10/21/how-to-setup-blogger-custom-domain-with</id>
    <content type="html"><![CDATA[<div class='post'>
<div>Just for record in history !</div>1. You need to go in your blogger Setting->Publishing, click on custom domain, add your domain (with subdomain ) and save settings.<div><br /></div><div>2. Connect ssh to your BIND server and create file /etc/bind/named.mydomain with this content :</div><div><div><span class="Apple-style-span" style="font-size: x-small;">$TTL    86400</span></div><div><span class="Apple-style-span" style="font-size: x-small;">@ IN      SOA     ns.here. root.here.  (</span></div><div><span class="Apple-style-span" style="font-size: x-small;">                                      2          ; Serial</span></div><div><span class="Apple-style-span" style="font-size: x-small;">                                      28800      ; Refresh</span></div><div><span class="Apple-style-span" style="font-size: x-small;">                                      14400      ; Retry</span></div><div><span class="Apple-style-span" style="font-size: x-small;">                                      604800     ; Expire - 1 week</span></div><div><span class="Apple-style-span" style="font-size: x-small;">                                      86400 )    ; Minimum</span></div><div><span class="Apple-style-span" style="font-size: x-small;"><br /></span></div><div><span class="Apple-style-span" style="font-size: x-small;">blog <span class="Apple-tab-span" style="white-space:pre"> </span>IN <span class="Apple-tab-span" style="white-space:pre"> </span>CNAME     ghs.google.com.  ; don&#8217;t remove  last dot</span></div><div><span class="Apple-style-span" style="font-size: medium;"><br /></span></div><div><span class="Apple-style-span"><span class="Apple-style-span" style="font-size: small;"></span></span></div><span><span>3. Open /etc/bind/named.conf.local and append these lines  :</span></span><div><span class="Apple-style-span" style="font-size: x-small;">zone &#8220;mydomain.org&#8221; IN {</span></div><div><span class="Apple-style-span" style="font-size: x-small;">        type master;</span></div><div><span class="Apple-style-span" style="font-size: x-small;">        file &#8220;/etc/bind/named.mydomain&#8221;;</span></div><div><span class="Apple-style-span" style="font-size: x-small;">        allow-update { none; };</span></div><div><span class="Apple-style-span" style="font-size: x-small;">};</span></div><div><span class="Apple-style-span" style="font-size: medium; "> </span></div></div><div><span class="Apple-style-span"><span class="Apple-style-span" style="font-size: small;"></span></span></div><span><span>4. Restart your bind server /etc/init.d/bind9 restart</span></span><div><span class="Apple-style-span" style="font-size: medium; "><br /></span></div><div><span class="Apple-style-span"><span class="Apple-style-span" style="font-size: small;"><span><span>5. Open your blog with web browser.</span></span></span></span></div></div>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Drawing Cartoons and Comics For Dummies]]></title>
    <link href="http://slashmili.github.io/blog/2010/10/21/drawing-cartoons-and-comics-for-dummies/"/>
    <updated>2010-10-21T00:00:00+08:00</updated>
    <id>http://slashmili.github.io/blog/2010/10/21/drawing-cartoons-and-comics-for-dummies</id>
    <content type="html"><![CDATA[<div class='post'>
<a onblur="try {parent.deselectBloggerImageGracefully();} catch(e) {}" href="http://media.wiley.com/product_data/coverImage/37/04704268/0470426837.jpg"><img style="float:left; margin:0 10px 10px 0;cursor:pointer; cursor:hand;width: 100px; height: 127px;" src="http://media.wiley.com/product_data/coverImage/37/04704268/0470426837.jpg" border="0" alt="" /></a>After 8 years it&#8217;s my second time which I try to learn drawing cartoons.<div>I found <a href="http://tinyurl.com/372qlak">this book</a> useful but part 1 of book is so boring!</div><div>Beginning of part 2 makes you little move, learns you how to draw head,neck,under body,objects and at the end of this part shows you how to draw Editorial cartoons (political cartoons)</div><div>In next part learns you about assembling what you learnt until now, tries to give you views about perspective, learns some hints about using letters in your cartoons and in last chapter of this part helps you use correct layout and background for your cartoons.</div><div>Part 4 talks about how to enhance your cartoon in Photoshop and part 5 has hints for you if you wana be a real cartoonist </div><div><br /></div><div>Overall I like the book, currently  read until beginning of chapter 6 and you can see my first cartoons :</div><div><br /></div><div><a href="http://2.bp.blogspot.com/_Oway9MdaY9E/TMA4LF631mI/AAAAAAAAAVY/ePpKroGiOA4/s1600/IMG_0026.JPG"><img src="http://2.bp.blogspot.com/_Oway9MdaY9E/TMA4LF631mI/AAAAAAAAAVY/ePpKroGiOA4/s200/IMG_0026.JPG" border="0" alt="" id="BLOGGER_PHOTO_ID_5530482105629791842" style="cursor: pointer; width: 200px; height: 150px; " /></a></div></div>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[PHP AGI is so slow]]></title>
    <link href="http://slashmili.github.io/blog/2010/04/13/php-agi-is-so-slow/"/>
    <updated>2010-04-13T00:00:00+08:00</updated>
    <id>http://slashmili.github.io/blog/2010/04/13/php-agi-is-so-slow</id>
    <content type="html"><![CDATA[<div class='post'>
In one case exactly in our customer&#8217;s server, AGI which I wrote it was so slow !<br />I checked line by line of codes but it was hooked in some line of code. because <a href="http://www.parspooyesh.com/">we</a> are pythonic company, immediately I want from team to rewrite that code with python ! (python AGI is more better that PHP ones)<br /><br />A few days ago on that server , tail of syslog was opened and suddenly another PHP AGI run and I saw bunch of error in syslog which said that you didn&#8217;t set TimeZone in php.ini !<br /><br />And bingo! I guess problem is here, I add TimeZone in php.ini and AGI works fine !</div>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[SIP Channel Stuck on Asterisk]]></title>
    <link href="http://slashmili.github.io/blog/2010/01/30/sip-channel-stuck-on-asterisk/"/>
    <updated>2010-01-30T00:00:00+08:00</updated>
    <id>http://slashmili.github.io/blog/2010/01/30/sip-channel-stuck-on-asterisk</id>
    <content type="html"><![CDATA[<div class='post'>
In some case we need to set call-limit=1 in sip config but after a while a SIP channel stuck and we got problem on sending new call to that SIP number.<br />Logger save this error :<br />&#8220;Call from peer XXX rejected due to usage limit of 1&#8221;<br /><span style="font-size:85%;">Asterisk*CLI> sip show channels<br />172.16.35.20     111         1e436b221c0  00102/00000  0x0 (nothing)    No  (d)  Tx: ACK                   </span><br /><br />Even when turn of that SIP, we got that error !<br />I always try to fixed that but every time this event happen we forced to fix this problem.<br /><br />Now it seems this problem solved in Asterisk 1.4.26 !<br />If you have problem like me check new version of asterisk</div>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[MusicOnHold is Choppy in Asterisk]]></title>
    <link href="http://slashmili.github.io/blog/2010/01/27/musiconhold-is-choppy-in-asterisk/"/>
    <updated>2010-01-27T00:00:00+08:00</updated>
    <id>http://slashmili.github.io/blog/2010/01/27/musiconhold-is-choppy-in-asterisk</id>
    <content type="html"><![CDATA[<div class='post'>
Sometimes after you setup your Asterisk system maybe you hear MOH-Music so choppy.<br /><br />Solutions which I test and solved problems are :<br /><ol><li>check your Zaptel  and especially module ztdummy (you can use <a href="http://tinyurl.com/ye2gb5g">this guide</a>)</li><li>check you VoiceGateway <span style="font-weight: bold;">VAD</span> (Voice Activity Detection) config and <span style="font-weight: bold;">Disabled it</span> !  you can follow my samples for Cisco AS5300 and Quintum Tenor<br /></li></ol><span style="font-weight: bold;">VAD Configurations : </span><br />1. Cisco AS5300 :<br /><ol><li>Login to your Cisco<br /></li><li>Type : &#8220;conf terminal&#8221;</li><li>Enter your voip dial peer : &#8220;dial-peer voice 200 voip&#8221; (200 is my dial-peer, yours maybe is something else )</li><li>Type : &#8220;no vad&#8221;</li><li>Press Ctr+C</li><li>write your configuration by typing write command : &#8221; write&#8221;</li></ol>2.  Quintum Tenor<br /><ol><li>Login to your Tenor</li><li>Type: &#8220;config&#8221;</li><li>Type : &#8220;IPRoutingGroup&#8221; (depends on your config maybe need to add a number after this command )</li><li>Type : &#8220;set VADEnable 0&#8221;</li><li>Save your config with command : &#8220;Submit&#8221;<br /></li></ol></div>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Monitor Slow Queries in MySQL]]></title>
    <link href="http://slashmili.github.io/blog/2009/11/03/monitor-slow-queries-in-mysql/"/>
    <updated>2009-11-03T00:00:00+08:00</updated>
    <id>http://slashmili.github.io/blog/2009/11/03/monitor-slow-queries-in-mysql</id>
    <content type="html"><![CDATA[<div class='post'>
In an application we had  many connection to  MySQL database to insert and select data.<div>Always MySQL cup usage was about 30%, I googled and found a MySQL option which store slow queries in a log file.</div><div>That&#8217;s awesome !  </div><div>You should add log-slow-queries to file /etc/my.cnf and restart MySQL service and here it is !</div><div><br /></div><div>Go and check around ! make a tea for your self and after a while check log file in /var/run/mysqld/mysqld-slow.log</div><div><br /></div><div>You can read more about this config in <a href="http://dev.mysql.com/doc/refman/5.1/en/slow-query-log.html">MySQL Reference</a> </div></div>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Asterisk's AMI Return Empty String]]></title>
    <link href="http://slashmili.github.io/blog/2009/09/12/asterisks-ami-return-empty-string/"/>
    <updated>2009-09-12T00:00:00+08:00</updated>
    <id>http://slashmili.github.io/blog/2009/09/12/asterisks-ami-return-empty-string</id>
    <content type="html"><![CDATA[<div class='post'>
About 2 months a ago, one day server of our customer decided to response empty string on <a href="http://www.voip-info.org/wiki/view/Asterisk+Manager+API+Action+Command">Command Action</a>. we feed bunch of data for reporting with AMI and especially with Command Action.<div><br /><div>It was so mystery for us ! what happen suddenly ? anyway we were lucky, we had a backup and moved server to backup ones.</div><div><br /></div><div>After works on that server we discovered this problem solved when we run asterisk as a root !</div><div>Anyway we did not work on that server until today. I get asterisk source code and debug lines and found a problem :</div><div>For unknown reason ownership of /tmp was different from always and a function wants to create temporary file but could not access to /tmp (file main/manager.c about line 1736).</div><div><br /></div><div>If Asterisk Developers checks  return value of mkstemp and debug if value is -1, life would be more pleasure </div></div></div>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Asterisk's Chanspy is Out of Sync]]></title>
    <link href="http://slashmili.github.io/blog/2009/09/10/asterisks-chanspy-is-out-of-sync/"/>
    <updated>2009-09-10T00:00:00+08:00</updated>
    <id>http://slashmili.github.io/blog/2009/09/10/asterisks-chanspy-is-out-of-sync</id>
    <content type="html"><![CDATA[<div class='post'>
About 3 month ago we had a problem on ChanSpy in Asterisk. sounds were out of sync.<div>We do everything ! changing asterisk version, compiling different version of asterisk ! </div><div>Users of that customer use EyeBeam as SIP Client, in asterisk bug tracker someone wrote there is a problem with onboard sound cards. so that we take a PAP2 and test ChanSpy with ordinary telephone and Bingoo ! everything was sync !</div><div><br /></div><div>We did update  EyeBeams and problem solved.</div><div><br /></div><div>These days I have problem like before, this time problem is files which recorded by MixMonitor are out of sync. tomorrow I am going to take PAP2 to that location and test files. I hope problem solves by changing EyeBeam or even add PCI sound card.</div><div><br /></div><div>I will update this post when get answer.<span style="font-weight: bold;"><br />Update<span style="font-weight: bold;"> : </span></span><span><br />problem solved by updating asterisk to 1.4.27.3</span><span style="font-weight: bold;"><span style="font-weight: bold;"></span> !<br /><span style="font-weight: bold;"><span style="font-weight: bold;"><span style="font-weight: bold;"></span></span></span><br /></span></div></div>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Hylafax T.30 T1 Timeout Problem]]></title>
    <link href="http://slashmili.github.io/blog/2009/09/08/hylafax-t30-t1-timeout-problem/"/>
    <updated>2009-09-08T00:00:00+08:00</updated>
    <id>http://slashmili.github.io/blog/2009/09/08/hylafax-t30-t1-timeout-problem</id>
    <content type="html"><![CDATA[<div class='post'>
I configured  iaxmodem and hylafax for on of our customer last week. I test FAX with sending fax internal extensions and everything worked prefect.<div>But today they called me and said they have a problem in sending and receiving FAX ! Again troubleshooting !</div><div><br /></div><div>I checked out log file log file was :</div><div><span class="Apple-style-span" style="font-weight: bold;">SEND FAILED: JOB 4 DEST 88276650 ERR [126] No receiver protocol (T.30 T1 timeout)</span><br /></div><div><br /></div><div>I googled about this problem and there was no direct answer to this. someone said there is a problem on connection your device and you have some thing like &#8220;UDP being a lossy medium&#8221;.</div><div><br /></div><div>Anyway after question from friends problem solved with changing <a href="http://www.quintum.com/">Tenor</a> configure:</div><div><br /><code>#config<br />#iprg<br />#set FaxRelay G.711 Mu-Law</code></div><div><br /></div>If you have a same problem set FaxRelay to Mu-Law maybe cause to solve yours.<br /><div><br /></div></div>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[How to Config Slave DNS Server]]></title>
    <link href="http://slashmili.github.io/blog/2009/09/08/how-to-config-slave-dns-server/"/>
    <updated>2009-09-08T00:00:00+08:00</updated>
    <id>http://slashmili.github.io/blog/2009/09/08/how-to-config-slave-dns-server</id>
    <content type="html"><![CDATA[<div class='post'>
In a project we have servers which were in different cities, and they connected to each other with Radio connection.<div>We want to setup DNS server in each server for easy use, but configuring dns in each server was to painful if server of one IP changed. we should change config in all server.</div><div><br /></div><div>So I setup a master DNS server and config other server as Slave.</div><div>Slave config is :</div><div><br /></div><div><div>zone &#8220;sip.server.loc&#8221;{</div><div>        type slave;</div><div>        file &#8220;/etc/bind/sip.server.loc&#8221;;</div><div>        masters {172.16.20.1;};</div><div>};</div><div><br /></div><div>Setting file value is useful when Master server is not accessible and Slave response requests with last config file(which updated that file from Master)</div></div></div>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Create Custom SNMP Tree With Bash]]></title>
    <link href="http://slashmili.github.io/blog/2009/08/30/create-custom-snmp-tree-with-bash/"/>
    <updated>2009-08-30T00:00:00+08:00</updated>
    <id>http://slashmili.github.io/blog/2009/08/30/create-custom-snmp-tree-with-bash</id>
    <content type="html"><![CDATA[<div class='post'>
In some case you need to monitor your service, and SNMP is ROCKs in reporting.<div>But if you don&#8217;t like to read bunch of document about SNMP protocol and creating server flow this instructions.</div><div><br /></div><div>snmpd helps you so much with <b>pass</b> config, it run your command when request comes for  a exact MIB.</div><div>Just open /etc/snmpd.conf and add this line to end of config file :</div><div><div><code>pass .1.3.6.1.4.1.2021.256  /bin/sh /usr/local/snmp_script/snmp_asterisk</code></div><div><br /></div><div>With this config when you request snmp walk on .1.3.6.1.4.1.2021.256 returns this result :</div><code>$ snmpwalk -v 1 pbx -c public .1.3.6.1.4.1.2021.256<br />UCD-SNMP-MIB::ucdavis.256.1 = Gauge32: 3<br />UCD-SNMP-MIB::ucdavis.256.2 = Gauge32: 10<br />UCD-SNMP-MIB::ucdavis.256.3 = Gauge32: 1<br />UCD-SNMP-MIB::ucdavis.256.4 = Gauge32: 3<br />UCD-SNMP-MIB::ucdavis.256.5 = Gauge32: 3<br /></code><br /><div>Yes ! I monitored my asterisk&#8217;s important status.</div><div>Now what&#8217;s line of that bash script ? you can <b>locate passtest </b>and create your file from that sample but I put my file for more sample !</div></div><code>#!/bin/sh -f<br />PATH=$path:/bin:/usr/bin:/usr/ucb:/usr/local/snmp_script/<br />PLACE=".1.3.6.1.4.1.2021.256"<br />REQ="$2"<br /><br />if [ "$1" = "-s" ]; then<br />echo $* >> /tmp/passtest.log<br />exit 0<br />fi<br /><br />if [ "$1" = "-n" ]; then<br />case "$REQ" in<br />$PLACE)      RET=$PLACE.1 ;;<br />$PLACE.1)    RET=$PLACE.2 ;;<br />$PLACE.2)  RET=$PLACE.3 ;;<br />$PLACE.3)    RET=$PLACE.4 ;;<br />$PLACE.4)    RET=$PLACE.5 ;;<br />*)           exit 0 ;;<br />esac<br />else<br />case "$REQ" in<br />$PLACE)    exit 0 ;;<br />*)         RET=$REQ ;;<br />esac<br />fi<br /><br />echo "$RET"<br />case "$RET" in<br />$PLACE.1) echo "gauge"; echo `member_in_queue` ; exit 0 ;;<br />$PLACE.2) echo "gauge"; echo `number_of_answerd_call` ; exit 0 ;;<br />$PLACE.3) echo "gauge"; echo `number_of_missed_call`; exit 0 ;;<br />$PLACE.4) echo "gauge"; echo `rate_answerd_call` ;;<br />$PLACE.5) echo "gauge"; echo `rate_missed_call` ; exit 0 ;;<br />*) echo "string"; echo "ack... $RET $REQ"; exit 0 ;;<br />esac<br /></code><br /><br />You can use this MIBS in Monitoring System like Zenoss and &#8230;</div>
]]></content>
  </entry>
  
</feed>
