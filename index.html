
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>/mili</title>
  <meta name="author" content="Milad Rastian">

  
  <meta name="description" content="Recently we had an issue with rsyslog daemon, now and then it was crashing and the only way to debug such an application (especially if it&rsquo;s &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://slashmili.org">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="/mili" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./javascripts/lib/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-45055199-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">/mili</a></h1>
  
    <h2>Lets try the blogging again!</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:slashmili.org" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2014/06/16/debugging-application-crash-in-linux/">Debugging Application Crash in Linux</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2014-06-16T06:56:00+08:00" pubdate data-updated="true">Jun 16<span>th</span>, 2014</time>
        
           | <a href="/blog/2014/06/16/debugging-application-crash-in-linux/#disqus_thread"
             data-disqus-identifier="http://slashmili.org/blog/2014/06/16/debugging-application-crash-in-linux/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Recently we had an issue with <a href="http://www.rsyslog.com/">rsyslog</a> daemon, now and then it was crashing and the only way to debug such an application (especially if it&rsquo;s not something developed by your team) is using <a href="http://en.wikipedia.org/wiki/Core_dump">core dump</a>. It&rsquo;s not kind of task that you do every day and it took me a while to search and remember how did it last time.</p>

<h2>Enable Core Dump</h2>

<p>The first is step is to enable the Core Dump, It&rsquo;s pretty simple. Follow <a href="http://www.unixmen.com/how-to-enable-core-dumps-in-rhel6/">this guide</a> and you can enable it in no time.</p>

<blockquote><p>The core dump only will be generated for those process that started after the above changes. Don&rsquo;t forget to restart the daemon or application you have problem with.</p></blockquote>

<h2>Wait for the next crash!</h2>

<p>Make coffee and enjoy the life and be prepared for the next crash :)</p>

<blockquote><p>We are using <a href="http://zenoss.org">Zenoss</a>, it&rsquo;s monitoring the important services like apache, rsyslog and etc. If the process is not running we get an SMS right away.</p></blockquote>

<h2>Install debugging packages</h2>

<p>Make sure you have <strong>gdb</strong> package installed.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>yum install gdb</span></code></pre></td></tr></table></div></figure>


<p>GDB is <a href="http://en.wikipedia.org/wiki/GNU_Debugger">GNU Debugger</a> is the standard debugger for the GNU operating system.</p>

<p>If you are using Centos during the debugging you might see some messages like</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>Reading symbols from /lib64/libc.so.6...(no debugging symbols found)...done.
</span><span class='line'>Loaded symbols for /lib64/libc.so.6</span></code></pre></td></tr></table></div></figure>


<p>In order to be able to debug and see the full stacktrace you need to install <code>yum-utils</code>. Then you need to install the debugging packages for the application with <code>debuginfo-install</code>. It installs headers and debugging tools that are required to debug rsyslog daemon.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>yum install yum-utils
</span><span class='line'>debuginfo-install  rsyslog-5.8.10-8.el6.x86_64</span></code></pre></td></tr></table></div></figure>


<h2>Read the Core dump</h2>

<p>What you are going to get out of this core dump is <a href="http://en.wikipedia.org/wiki/Stack_trace">stacktrace</a> of application and the exact line of code that caused this failure which requires some programming skills. . I&rsquo;m going to explain how did I debug and read the stacktrace for rsyslog but you can follow the same steps to do it for any other application.</p>

<ul>
<li>Run <code>gdb</code> for the core dump</li>
</ul>


<p>You need to run the following command to start the <code>gdb</code> for that specific core dump.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>gdb /sbin/rsyslogd /tmp/core-rs-action-que-6-0-0-28309-1402524331
</span><span class='line'>GNU gdb (GDB) Red Hat Enterprise Linux (7.2-60.el6_4.1)
</span><span class='line'>...
</span><span class='line'>
</span><span class='line'>Core was generated by `/sbin/rsyslogd -i /var/run/syslogd.pid -c 5'.
</span><span class='line'>Program terminated with signal 6, Aborted.
</span><span class='line'> 0x00007fea37ff0925 in raise (sig=6) at ../nptl/sysdeps/unix/sysv/linux/raise.c:64
</span><span class='line'>64  return INLINE_SYSCALL (tgkill, 3, pid, selftid, sig);
</span><span class='line'>(gdb)</span></code></pre></td></tr></table></div></figure>


<blockquote><p>Based on my configuration the core dump saved under <code>/tmp/core-rs-action-que-6-0-0-28309-1402524331</code>.</p></blockquote>

<ul>
<li>Now gdb prompt is ready for a command.</li>
</ul>


<blockquote><p>If you are new to gdb give yourself a faviour and check this <a href="http://www.cprogramming.com/gdb.html">gdb crash course</a></p></blockquote>

<p>The First command that I usally run especially in this suiation is <strong>where</strong>. It spits out the stacktrace and the line of code which was running when the crash happend.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>(gdb) where
</span><span class='line'> #0  0x00007fea37ff0925 in raise (sig=6) at ../nptl/sysdeps/unix/sysv/linux/raise.c:64
</span><span class='line'> #1  0x00007fea37ff2105 in abort () at abort.c:92
</span><span class='line'> #2  0x00007fea38fece17 in sigsegvHdlr (signum=6) at debug.c:830
</span><span class='line'> #3  &lt;signal handler called>
</span><span class='line'> #4  0x00007fea37ff0925 in raise (sig=6) at ../nptl/sysdeps/unix/sysv/linux/raise.c:64
</span><span class='line'> #5  0x00007fea37ff2105 in abort () at abort.c:92
</span><span class='line'> #6  0x00007fea3802e837 in __ libc _ message (do_abort=2, fmt=0x7fea38116ac0 "*** glibc detected *** %s: %s: 0x%s ***\n")
</span><span class='line'>    at ../sysdeps/unix/sysv/linux/libc_fatal.c:198
</span><span class='line'>    #7  0x00007fea38034166 in malloc_printerr (action=3, str=0x7fea38114bdc "invalid fastbin entry (free)", ptr=&lt;value optimized out>)
</span><span class='line'>        at malloc.c:6332
</span><span class='line'>        #8  0x00007fea38ffadf9 in qDelLinkedList (pThis=&lt;value optimized out>) at queue.c:586
</span><span class='line'>        #9  0x00007fea38ffb95c in DoDeleteBatchFromQStore (pThis=0x7fea398d9da0, nElem=1) at queue.c:1340
</span><span class='line'>        #10 0x00007fea38ffe40d in DeleteBatchFromQStore (pThis=0x7fea398d9da0, pWti=&lt;value optimized out>) at queue.c:1368
</span><span class='line'>        #11 DeleteProcessedBatch (pThis=0x7fea398d9da0, pWti=&lt;value optimized out>) at queue.c:1428
</span><span class='line'>        #12 DequeueConsumableElements (pThis=0x7fea398d9da0, pWti=&lt;value optimized out>) at queue.c:1457
</span><span class='line'>        #13 DequeueConsumable (pThis=0x7fea398d9da0, pWti=&lt;value optimized out>) at queue.c:1505
</span><span class='line'>        #14 0x00007fea38ffe603 in DequeueForConsumer (pThis=&lt;value optimized out>, pWti=&lt;value optimized out>) at queue.c:1642
</span><span class='line'>        #15 ConsumerReg (pThis=&lt;value optimized out>, pWti=&lt;value optimized out>) at queue.c:1696
</span><span class='line'>        #16 0x00007fea38ff7126 in wtiWorker (pThis=0x7fea398da220) at wti.c:313
</span><span class='line'>        #17 0x00007fea38ff6c1a in wtpWorker (arg=0x7fea398da220) at wtp.c:387
</span><span class='line'>        #18 0x00007fea3897b9d1 in start_thread (arg=0x7fea17fff700) at pthread_create.c:301
</span><span class='line'>        #19 0x00007fea380a6b6d in clone () at ../sysdeps/unix/sysv/linux/x86_64/clone.S:115
</span><span class='line'>        (gdb)</span></code></pre></td></tr></table></div></figure>


<p>What I can read from this output is the program crashed in queue.c in function qDelLinkedList at line 586. My gut feeling is it has something to do with memory allocation. In order to follow up more deeply I had to find the right source code that matches with my application. We found out that the application crashed on calling <strong>free</strong> system call over a variable. That looks like a dead end to me! Fortunately there was a new package of <strong>libc</strong> available on Centos, we upgraded it and so for everything works smoothly.</p>

<blockquote><p>These steps are just a starting point for debugging a crash. I wish you a wonderful journey!</p></blockquote>

<hr />
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/11/17/unleash-the-daemons/">Unleash the Daemons</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-11-17T22:43:00+08:00" pubdate data-updated="true">Nov 17<span>th</span>, 2013</time>
        
           | <a href="/blog/2013/11/17/unleash-the-daemons/#disqus_thread"
             data-disqus-identifier="http://slashmili.org/blog/2013/11/17/unleash-the-daemons/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>I did a talk at <a href="https://github.com/klxrb">KL Ruby Brigade</a> monthly meeting about Daemons in Unix environment.</p>

<p>If you want to know what the Daemon is, here is a quick explanation:</p>

<blockquote><p>In multitasking computer operating systems, a daemon (/ˈdeɪmən/ or /ˈdiːmən/) is a computer program that runs as a background process, rather than being under the direct control of an interactive user <a href="http://en.wikipedia.org/wiki/Daemon_%28computing%29">Wikipedia</a></p></blockquote>

<p>You may find my presentation here:</p>

<iframe src="http://www.slideshare.net/slideshow/embed_code/27922954 " width="595" height="446" frameborder="0" marginwidth="0" marginheight="0" scrolling="no" style="border:1px solid #CCC;border-width:1px 1px 0;margin-bottom:5px" allowfullscreen></iframe>


<p></p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/08/11/monitor-your-apps-behaviour/">Monitor Your App&#8217;s Behaviour</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-08-11T00:00:00+08:00" pubdate data-updated="true">Aug 11<span>th</span>, 2013</time>
        
           | <a href="/blog/2013/08/11/monitor-your-apps-behaviour/#disqus_thread"
             data-disqus-identifier="http://slashmili.org/blog/2013/08/11/monitor-your-apps-behaviour/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><div class='post'>
<div dir="ltr" style="text-align: left;" trbidi="on"><div style="color: #444444; font-family: 'Helvetica Neue', HelveticaNeue, Helvetica, Arial, sans-serif; font-size: 14px; line-height: 19px;">I had a talk&nbsp;at&nbsp;<a data-mce-href="https://www.facebook.com/groups/klxrb/" href="https://www.facebook.com/groups/klxrb/" style="color: #444444;">KL Ruby Brigade</a>&nbsp;about Monitoring App&#8217;s behaviour. You can find the&nbsp;presentation in&nbsp;<a data-mce-href="https://docs.google.com/presentation/d/1nsEUW9s5_YoxXWgrwl3mvmIdkhWamYlIwADfKfJEpkc/edit?usp=sharing" href="https://docs.google.com/presentation/d/1nsEUW9s5_YoxXWgrwl3mvmIdkhWamYlIwADfKfJEpkc/edit?usp=sharing" style="color: #444444;">here</a>&nbsp;or flip it here:</div><div style="color: #444444; font-family: 'Helvetica Neue', HelveticaNeue, Helvetica, Arial, sans-serif; font-size: 14px; line-height: 19px;"><iframe allowfullscreen="" frameborder="0" height="356" marginheight="0" marginwidth="0" mozallowfullscreen="" scrolling="no" src="http://www.slideshare.net/slideshow/embed_code/25139283" style="border-width: 1px 1px 0; border: 1px solid #CCC; margin-bottom: 5px; max-width: 427px;" webkitallowfullscreen="" width="100%"> </iframe> <br /><div style="margin-bottom: 5px;"><strong> <a href="http://www.slideshare.net/miladrastian/monitor-your-apps-behaviour-25139283" target="_blank" title="Monitor your app&amp;#39;s behaviour">Monitor your app&amp;#39;s behaviour</a> </strong> from <strong><a href="http://www.slideshare.net/miladrastian" target="_blank">Milad Rastian</a></strong> <br /><br /></div></div><div style="color: #444444; font-family: 'Helvetica Neue', HelveticaNeue, Helvetica, Arial, sans-serif; font-size: 14px; line-height: 19px;">My talk was mainly about why and how you can monitor your app&#8217;s behaviour through monitoring systems like&nbsp;<a data-mce-href="http://www.zenoss.org/" href="http://www.zenoss.org/" style="color: #444444;">Zenoss</a>&nbsp;and&nbsp;<a data-mce-href="https://github.com/etsy/statsd/" href="https://github.com/etsy/statsd/" style="color: #444444;">Statsd</a>&nbsp;&amp;&nbsp;<a data-mce-href="http://graphite.wikidot.com/" href="http://graphite.wikidot.com/" style="color: #444444;">Graphite</a>.</div><div style="color: #444444; font-family: 'Helvetica Neue', HelveticaNeue, Helvetica, Arial, sans-serif; font-size: 14px; line-height: 19px;"><br /></div><div style="color: #444444; font-family: 'Helvetica Neue', HelveticaNeue, Helvetica, Arial, sans-serif; font-size: 14px; line-height: 19px;"><br /></div></div></div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2012/03/16/online-course-with-coursera/">Online Course With Coursera</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2012-03-16T00:00:00+08:00" pubdate data-updated="true">Mar 16<span>th</span>, 2012</time>
        
           | <a href="/blog/2012/03/16/online-course-with-coursera/#disqus_thread"
             data-disqus-identifier="http://slashmili.org/blog/2012/03/16/online-course-with-coursera/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><div class='post'>
<div class='posterous_autopost'><p><a href="https://www.coursera.org/">Coursera</a> is online education center, it&#8217;s aim is to bring education for free to any person who is seeking for that.</p>  <p>I enrolled for three courses but I&#8217;ve only managed to attend one of them since 1 week ago that I registered.&nbsp;</p>  <p><strong>Software as a Service</strong> course is really great course for person who wants to learn <a href="http://en.wikipedia.org/wiki/Software_as_a_service">SaaS</a>,&nbsp;<a href="http://www.ruby-lang.org/en/" title="Ruby">Ruby</a>&nbsp;and <a href="http://rubyonrails.org/">Rails</a> and beside that you have fun class. Even though is so soon to judge about Rails but I&#8217;ve already missed <a href="https://www.djangoproject.com/">Django</a>.</p>  <p>I like their teaching method, you follow&nbsp;lectures and do homework related to the lectures, and they give you a score for you works(apparently your submitted files is runed with unittest and each test has score). I&#8217;ve already learnt a lot about Ruby just with following course and doing homework.</p>  <p>After all don&#8217;t miss.</p></div></div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2012/03/16/monitor-zenoss-with-chrome-plugin/">Monitor Zenoss With Chrome&#8217;s Plugin</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2012-03-16T00:00:00+08:00" pubdate data-updated="true">Mar 16<span>th</span>, 2012</time>
        
           | <a href="/blog/2012/03/16/monitor-zenoss-with-chrome-plugin/#disqus_thread"
             data-disqus-identifier="http://slashmili.org/blog/2012/03/16/monitor-zenoss-with-chrome-plugin/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><div class='post'>
<div class='posterous_autopost'><p>As currently my life is kind of stuck into Zenoss, I made another tools for Zenoss.</p>  <p>This time, it&#8217;s a Google Chrome&#8217;s plugin, I can say it&#8217;s more useful than <a href="https://play.google.com/store/apps/details?id=com.github.slashmili.Zendroid">Zenroid</a>, because you can watch out server&#8217;s alarm while you are browsing the web.</p>  <p>You can get source from <a href="https://github.com/slashmili/zenchor">zenchor</a>&nbsp;repo and install it from <a href="https://chrome.google.com/webstore/detail/hibkfafceeekmknadpglakdnmaiigonp?utm_source=chrome-ntp-icon">Chrome Web Store</a>.</p></div></div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2012/02/03/configure-and-manage-your-servers-in/">Configure and Manage Your Servers in a FLASH</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2012-02-03T00:00:00+08:00" pubdate data-updated="true">Feb 3<span>rd</span>, 2012</time>
        
           | <a href="/blog/2012/02/03/configure-and-manage-your-servers-in/#disqus_thread"
             data-disqus-identifier="http://slashmili.org/blog/2012/02/03/configure-and-manage-your-servers-in/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><div class='post'>
<div class='posterous_autopost'><p>About a 3 months ago I had a speech in <a href="http://webcamp.my/">Webcamp KL Group</a> about <a href="http://puppetlabs.com/">Puppet</a></p>  <p>You can get the voice from <a href="http://webcamp.my/2011/11/milad-rastian-configure-and-manage-your-servers-in-a-flash-with-puppet/">here</a>&nbsp;and watch the presntation from here :</p>  <p style="text-align: center;"><iframe src="https://docs.google.com/present/embed?id=dfk6jgws_2dh2r4xf7" frameborder="0" height="342" width="410"></iframe></p></div></div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2011/07/03/zendroid-android-application-to-monitor/">Zendroid - Android Application to Monitor Zenoss&#8217;s Events</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2011-07-03T00:00:00+08:00" pubdate data-updated="true">Jul 3<span>rd</span>, 2011</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>I released an Android Application which you can monitor your Zenoss events right in your Android</p>

<p><img src="/images/posts/2011-07-03-zendroid-android-application-to-monitor.png" alt="Zendroid" /></p>

<p>You may install it from <a href="http://goo.gl/RU1Pk">Android Market2</a>. Codes are available in <a href="https://github.com/slashmili/Zendroid">GitHub repo2</a></p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2011/07/03/problem-with-postgresql-odbc-zenpack/">Problem With PostgreSQL ODBC ZenPack</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2011-07-03T00:00:00+08:00" pubdate data-updated="true">Jul 3<span>rd</span>, 2011</time>
        
           | <a href="/blog/2011/07/03/problem-with-postgresql-odbc-zenpack/#disqus_thread"
             data-disqus-identifier="http://slashmili.org/blog/2011/07/03/problem-with-postgresql-odbc-zenpack/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><div class='post'>
<div class="posterous_autopost"><p>In my new job(if after 8 months you can count it as new!) I am responsible to maintain <a href="http://zenoss.org/" target="_blank">Zenoss</a> and some week I am on call for Zenoss&#8217;s Alarm.</p>  <p>One of the strangest problem that we had was about <a href="http://community.zenoss.org/docs/DOC-3497">PostgreSQL ODBC Database Monitor</a> package. suddenly zenperfsql stopped without any log.</p>  <p>I tried to run zenperfsql in debug mode and I hoped that I would fix the problem. but after the daemon died again the error that I saw was : </p>  <p><code>python: pthread_mutex_lock.c:62: __pthread_mutex_lock: Assertion `mutex-&gt;__data.__owner == 0' failed.</code></p>  <p>I never thought that I would face to python&#8217;s thread stuff ! as far as I knew Zenoss use <a href="http://twistedmatrix.com/">Twisted</a> framework and this error just happened for sql daemon so I reviewed the way that we had installed the packahe</p>  <p>For using this package you need to follow these steps </p>  <p><code>    /usr/local/zenoss/python/bin/easy_install pyodbc    apt-get install odbc-postgresq    apt-get install unixodbc-dev    </code></p>  <p>And edit /etc/odbcinst.ini, here is the tricky part, if you follow unixodbc document, it recommends you to config like :</p>  <p><code>    [PostgreSQL] Description     = PostgreSQL ODBC driver (Unicode version) Driver          = /usr/lib/odbc/psqlodbca.so Setup           = /usr/lib/odbc/libodbcpsqlS.so    </code></p>  <p>But you need to add an other line which is specifying number of Threads </p>  <p>  </p><p><code>    [PostgreSQL] Description     = PostgreSQL ODBC driver (Unicode version) Driver          = /usr/lib/odbc/psqlodbca.so Setup           = /usr/lib/odbc/libodbcpsqlS.so Threading = 2    </code></p>  <p> </p>  <p>After adding Threading line I never face that problem, I dunno why Twisted which is built as asynchronous framework can not handle this and we need to limit ODBC&#8217;s Thread.</p>  <p> </p>  <p><strong>UPDATE :</strong></p>  <p>I found another blog that he faced same problem and he explains the reason (<a href="http://hynek.me/blog/2011/04/twisted-sybase/">see more</a>)</p>  <p>  </p></div></div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2011/03/06/when-you-are-not-free-even-to-do-rm-rf/">When You Are Not Free Even to Do Rm -rf / !</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2011-03-06T00:00:00+08:00" pubdate data-updated="true">Mar 6<span>th</span>, 2011</time>
        
           | <a href="/blog/2011/03/06/when-you-are-not-free-even-to-do-rm-rf/#disqus_thread"
             data-disqus-identifier="http://slashmili.org/blog/2011/03/06/when-you-are-not-free-even-to-do-rm-rf/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><div class='post'>
<div class='posterous_autopost'><p>How much it is painful that you can&#8217;t do rm -rf / in your machine !</p>  <p>when I did rm I got this error :</p>  <p><span style="font-size: x-small;">rm: cannot remove root directory `/&#8217; </span></p>  <p>In past great responsibility brought great power but this days you are not free.</p>  <p>&nbsp;</p>  <p>Cheers for past that you can do every thing you want !</p>  <p>&nbsp;</p></div></div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2011/03/06/matching-list-and-map-in-scala/">Matching List and Map in Scala</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2011-03-06T00:00:00+08:00" pubdate data-updated="true">Mar 6<span>th</span>, 2011</time>
        
           | <a href="/blog/2011/03/06/matching-list-and-map-in-scala/#disqus_thread"
             data-disqus-identifier="http://slashmili.org/blog/2011/03/06/matching-list-and-map-in-scala/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><div class='post'>
<div class='posterous_autopost'><p>For a while that I&#8217;ve been reading Scala I find it as a strong and powerfull language which helps you to write your application perfectly, it&#8217;s not like Java that ties you to follow some&nbsp;arid rules and it&#8217;s not like PHP that let you screw in your application(of course you can handle your code in PHP). Programing in Scala is fun as programming Python and it&#8217;s powerful as Java!</p>  <p>Scala&#8217;s Match syntax is liitle like Switch-Case but you can match value, type, regex, special type of class and more.&nbsp;</p>  <p>Here is a syntax of matching for List and map in Scala, for finding these codes I search a lot to ! so I wrote these samples for future usage.&nbsp;</p>  <p><code>    val foobar = Map("foo"-&gt;"bar")    foobar&nbsp;match {&nbsp;    &nbsp;&nbsp;case map :&nbsp;&nbsp;scala.collection.Map[_, _] =&gt; println(map)    }    </code></p>  <p>&nbsp;</p>  <p><code>    val foobar = List("foo","bar")    foobar&nbsp;match {&nbsp;    &nbsp;&nbsp;case &nbsp;list:Seq[_] =&gt; println(list)    }    </code></p>  <p>&nbsp;</p>  <p>So maybe you ask that why you need to handle something like this ?</p>  <p>It&#8217;s real world senario: I wanna to pass mix value of Map and List and String to function and get JSON string from that. some thing like this :</p>  <p><code>    def toJson(ob: Any):String = {    &nbsp;&nbsp;ob match {    &nbsp;&nbsp; &nbsp;case s : String&nbsp;&nbsp; =&gt; return "\""+ s + "\""    &nbsp;&nbsp;&nbsp; case d:Double&nbsp;&nbsp; =&gt; return "\""+ d.toString + "\""    &nbsp;&nbsp;&nbsp; case map:scala.collection.Map[_, _] =&gt; return "{" + ((for((k,v) &lt;- map) yield toJson(k) + ":" + toJson(v) ).reduceLeft(_ + ", " + _) ) + "}"    &nbsp;&nbsp;&nbsp; case list @ List(_*)&nbsp;&nbsp; =&gt; return "[" + ((for (m&lt;-list) yield toJson(m)).reduceLeft(_ + ", " + _) )&nbsp;&nbsp; + "]"    }    </code></p>  <p>Mabye last code doesn&#8217;t work probably ! because I write it to just show you how you can use this feature</p></div></div>
</div>
  
  


    </article>
  
  <div class="pagination">
    
      <a class="prev" href="/blog/page/2/">&larr; Older</a>
    
    <a href="/blog/archives">Blog Archives</a>
    
  </div>
</div>
<aside class="sidebar">
  
    <section>
  <h1>About Me</h1>
  <p>You&#8217;ve reached Milad!<br/ >I&#8217;m software enthusiast and interested in free software culture. You might also find me in DevOps jobs as well!</p>
  <p>You may find more interesting stuff on my <a href="http://linkedin.com/in/miladrastian">Linkedin</a>, <a href="https://github.com/slashmili">Github</a> or <a href="https://twitter.com/slashmili">Twitter</a> pages.</p>
</section>
<section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2014/06/16/debugging-application-crash-in-linux/">Debugging Application Crash in Linux</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/11/17/unleash-the-daemons/">Unleash the Daemons</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/08/11/monitor-your-apps-behaviour/">Monitor Your App&#8217;s Behaviour</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/03/16/online-course-with-coursera/">Online Course With Coursera</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/03/16/monitor-zenoss-with-chrome-plugin/">Monitor Zenoss With Chrome&#8217;s Plugin</a>
      </li>
    
  </ul>
</section>

<section>
  <h1>GitHub Repos</h1>
  <ul id="gh_repos">
    <li class="loading">Status updating&#8230;</li>
  </ul>
  
  <a href="https://github.com/slashmili">@slashmili</a> on GitHub
  
  <script type="text/javascript">
    $(document).ready(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'slashmili',
            count: 0,
            skip_forks: true,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/javascripts/github.js" type="text/javascript"> </script>
</section>





  
</aside>

    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2014 - Milad Rastian -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'militheblog';
      
        
        var disqus_script = 'count.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = '//' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>



<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) {return;}
  js = d.createElement(s); js.id = id; js.async = true;
  js.src = "//connect.facebook.net/en_US/all.js#appId=212934732101925&xfbml=1";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>





  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = '//platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
